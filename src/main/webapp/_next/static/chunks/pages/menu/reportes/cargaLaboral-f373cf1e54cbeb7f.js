(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[848],{5384:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu/reportes/cargaLaboral",function(){return a(8291)}])},8291:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return V}});var n=a(5893),r=a(7294),i=a(6621),o=a(9226),s=a(6886),l=a(5861),d=a(3321),c=a(8456),u=a(6242),x=a(8703),g=a(6901),h=a(3148),p=a(6495),b=a(1876),j=a(7028);function m(e){let{dataChart:t,dataLabel:a}=e,r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"ESTADOS ORDENES DE TRABAJO",position:"top",align:"center",color:b.lr,font:{size:16}},subtitle:{display:!0,text:"Cantidad",position:"left",align:"center",color:"#032B57",font:{size:14}},datalabels:{display:!0,labels:{value:{color:"#00325c"}},font:{weight:"bold"},formatter:function(e){return"\n"+e}}}};return(0,n.jsx)(p.$Q,{height:400,options:r,data:{labels:a,datasets:[{label:" Total",data:t,backgroundColor:["rgba(88, 214, 141)","rgba(93, 173, 226)","rgba(236, 112, 99)","rgba(170, 183, 184)","rgba(248, 180, 113)"],borderColor:["rgba(88, 214, 141)","rgba(93, 173, 226)","rgba(236, 112, 99)","rgba(170, 183, 184)","rgba(248, 180, 113)"],hoverBackgroundColor:["rgba(88, 214, 141, 0.5)","rgba(93, 173, 226, 0.5)","rgba(236, 112, 99, 0.5)","rgba(170, 183, 184, 0.5)","rgba(248, 180, 113, 0.5)"],categoryPercentage:.8,borderWidth:3}]}})}function f(e){let{dataChart:t,dataLabel:a}=e,r={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"CLASES ORDENES DE TRABAJO",position:"top",align:"center",color:b.lr,font:{size:16}},datalabels:{display:!0,labels:{value:{color:"#00325c"}},font:{weight:"bold"}}}};return(0,n.jsx)(p.$I,{height:400,options:r,data:{labels:a,datasets:[{label:" Total",data:t,backgroundColor:["rgba(248, 248, 113)","rgba(164, 214, 87 )","rgba(96, 186, 175 , 196)"],borderColor:["rgba(248, 248, 113)","rgba(164, 214, 87 )","rgba(96, 186, 175, 196)"],hoverBackgroundColor:["rgba(248, 248, 113, 0.5)","rgba(164, 214, 87 , 0.5)","rgba(96, 186, 175, 0.5)"],borderWidth:3}]}})}h.kL.register(j.Z,h.uw,h.f$,h.ZL,h.qi,h.od,h.jn,h.Dx,h.DK,h.u,h.De);var Z=a(3203),v=a(7536),y=a(6310),P=a(7533),w=a(2435),C=a(6450),O=a(5579),I=a(265),S=a(1649);function E(e){let{dataChart:t}=e,a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"ACTIVIDADES ORDENES DE TRABAJO",position:"top",align:"center",color:b.lr,font:{size:16}},datalabels:{display:!0,labels:{value:{color:"#00325c"}},font:{weight:"bold"}}}},r={labels:null==t?void 0:t.map(e=>e.nombreMes),datasets:[{label:" Total Ordenes de Trabajo",data:null==t?void 0:t.map(e=>e.totalOrdenesTrabajo),backgroundColor:"rgba(255, 162, 0)",borderColor:"rgba(255, 162, 0 )",hoverBackgroundColor:"rgba(255, 162, 0, 0.5)",borderWidth:3},{label:" Total Actividad",data:null==t?void 0:t.map(e=>e.totalActividades),backgroundColor:"rgba(75, 192, 255)",borderColor:"rgba(75, 192, 255)",hoverBackgroundColor:"rgba(75, 192, 255, 0.5)",borderWidth:3}]};return(0,n.jsx)(p.x1,{height:400,options:a,data:r})}var T=a(4267),A=a(7918),R=a(7720),k=e=>{let{dataChart:t}=e,{totalActividades:a,totalOrdenesTrabajo:r,nombreMes:i,promedio:o,codigoColorRgba:d,puntuacion:c}=t[0]||[];return(0,n.jsx)(u.Z,{sx:{background:d,height:"100%",display:"flex",alignItems:"center",borderRadius:"0%"},children:(0,n.jsx)(T.Z,{children:(0,n.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:1,children:[(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{color:"text.secondary",children:"Promedio"})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,display:"flex",justifyContent:"end",children:(0,n.jsx)(A.Z,{sx:{height:50,fontSize:20,fontWeight:"bold"},label:"".concat(o," %")})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{variant:"fullWidth",sx:{borderBottomWidth:3}})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{color:"text.secondary",children:"Mes"})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{textAlign:"end",children:i})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{variant:"fullWidth",sx:{borderBottomWidth:3}})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{color:"text.secondary",children:"Total Ordenes"})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{textAlign:"end",children:r})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{variant:"fullWidth",sx:{borderBottomWidth:3}})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{color:"text.secondary",children:"Total Actuaciones"})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{textAlign:"end",children:a})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(R.Z,{variant:"fullWidth",sx:{borderBottomWidth:3}})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{color:"text.secondary",children:"Puntuaci\xf3n"})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,children:(0,n.jsx)(l.Z,{textAlign:"end",children:c})})]})})})};function D(e){let{dataChart:t}=e,a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},title:{display:!0,text:"ACTIVIDADES ORDENES DE TRABAJO",position:"top",align:"center",color:b.lr,font:{size:16}},subtitle:{display:!0,text:"Cantidad",position:"left",align:"center",color:"#032B57",font:{size:14}},datalabels:{display:!0,labels:{value:{color:"#00325c"}},font:{weight:"bold"},formatter:function(e){return"\n"+e}}}},r={labels:null==t?void 0:t.map(e=>e.nombreMes),datasets:[{label:" Total Ordenes de Trabajo",data:null==t?void 0:t.map(e=>e.totalOrdenesTrabajo),backgroundColor:"rgba(255, 162, 0)",borderColor:"rgba(255, 162, 0 )",hoverBackgroundColor:"rgba(255, 162, 0, 0.5)",categoryPercentage:.8,borderWidth:3},{label:" Total Actividad",data:null==t?void 0:t.map(e=>e.totalActividades),backgroundColor:"rgba(75, 192, 255)",borderColor:"rgba(75, 192, 255)",hoverBackgroundColor:"rgba(75, 192, 255, 0.5)",categoryPercentage:.8,borderWidth:3}]};return(0,n.jsx)(p.$Q,{height:400,options:a,data:r})}h.kL.register(j.Z,h.uw,h.f$,h.ZL,h.qi,h.od,h.jn,h.Dx,h.u,h.De);var B=a(3310),V=()=>{var e,t,a,h,p;let{user:{regional:j}}=(0,S.v9)(e=>e.auth),T=y.Ry().shape({regionalId:y.Ry().nullable().required("Seleccione Regional"),unidadId:y.Ry().nullable().required("Seleccione Unidad"),añoId:y.Ry().nullable().required("Seleccione A\xf1o")}),{handleSubmit:A,watch:R,setValue:V,control:W,formState:{errors:q},reset:L}=(0,v.cI)({defaultValues:{regionalId:null,unidadId:null,añoId:null,dependenciaId:null,mesId:null},mode:"onChange",resolver:(0,P.X)(T)}),z=null===(e=R("regionalId"))||void 0===e?void 0:e.id,_=null===(t=R("unidadId"))||void 0===t?void 0:t.id,N=null===(a=R("a\xf1oId"))||void 0===a?void 0:a.id,J=null===(h=R("dependenciaId"))||void 0===h?void 0:h.description,M=null===(p=R("mesId"))||void 0===p?void 0:p.id,[$,F]=(0,r.useState)([]),[U,Q]=(0,r.useState)([]),[X,H]=(0,r.useState)(!1),[K,G]=(0,r.useState)(!1),[Y,ee]=(0,r.useState)([]),[et,ea]=(0,r.useState)([]),[en,er]=(0,r.useState)(!1),[ei,eo]=(0,r.useState)(!1),[es,el]=(0,r.useState)([]),[ed,ec]=(0,r.useState)(!1),[eu,ex]=(0,r.useState)(!1),eg={open:!1,severity:"",message:""},[eh,ep]=(0,r.useState)(eg),eb=e=>{let{severity:t,message:a}=e;ep({open:!0,severity:t,message:a})},ej=async()=>{await em(),await ef(),await eZ()},em=async()=>{G(!0);try{let{data:{code:e,msg:t,message:a}}=await C.Z.get("/v1/api/repordenestrabajoestado/filtrosBusquedaRepOrdenesTrabajoEstado?regional=".concat(z,"&unidad=").concat(_,"&anio=").concat(N,"&mes=").concat(M||"","&dependencia=").concat(J||""));0===e?(F(t.map(e=>e.cantidad)),Q(t.map(e=>e.estadoOrden)),await (0,O.V)(1e3),eb({severity:"success",message:a}),H(!0)):(F([]),Q([]),await (0,O.V)(1e3),eb({severity:"error",message:a}),H(!1))}catch(e){F([]),Q([]),await (0,O.V)(1e3),H(!1)}G(!1)},ef=async()=>{eo(!0);try{let{data:{code:e,msg:t}}=await C.Z.get("/v1/api/repordenestrabajoestado/filtrosBusquedaDosRepOrdenesTrabajoEstado?regional=".concat(z,"&unidad=").concat(_,"&anio=").concat(N,"&mes=").concat(M||"","&dependencia=").concat(J||""));0===e?(ee(t.map(e=>e.cantidad)),ea(t.map(e=>e.estadoOrden)),await (0,O.V)(1e3),er(!0)):(ee([]),ea([]),await (0,O.V)(1e3),er(!1))}catch(e){ee([]),ea([]),await (0,O.V)(1e3),er(!1)}eo(!1)},eZ=async()=>{ex(!0);try{let{data:{code:e,msg:t}}=await C.Z.get("/v1/api/repordenestrabajoestado/filtrosBusquedaTresRepOrdenesTrabajoEstado?regional=".concat(z,"&unidad=").concat(_,"&anio=").concat(N,"&mes=").concat(M||"","&dependencia=").concat(J||""));0===e?(el(t),await (0,O.V)(1e3),ec(!0)):(el([]),await (0,O.V)(1e3),ec(!1))}catch(e){el([]),await (0,O.V)(1e3),ec(!1)}ex(!1)};(0,r.useEffect)(()=>{(z&&_&&N||M||J)&&A(ej)()},[z,_,N,M,J]);let ev=M&&!eu&&ed&&1===es.length;return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(o.Z,{sx:{paddingTop:5,paddingBottom:5,paddingRight:1,paddingLeft:1,flex:"1"},children:(0,n.jsx)("form",{onSubmit:A(ej),noValidate:!0,children:(0,n.jsxs)(s.ZP,{container:!0,justifyContent:"center",alignItems:"center",spacing:3,children:[(0,n.jsx)(s.ZP,{container:!0,item:!0,xs:12,lg:4,children:(0,n.jsxs)(o.Z,{display:"flex",gap:1,children:[(0,n.jsx)(B.Z,{}),(0,n.jsx)(l.Z,{align:"left",component:"h6",variant:"subtitle1",color:b.ex,children:"Reporte Carga Laboral"})]})}),(0,n.jsxs)(s.ZP,{container:!0,item:!0,xs:12,justifyContent:"center",spacing:1,children:[(0,n.jsx)(s.ZP,{item:!0,xs:6,lg:1,children:(0,n.jsx)(w.Z,{required:!0,name:"regionalId",label:"Regional",url:"repordenestrabajoestado/regionalRepOrdenesTrabajoEstado?regional=".concat(j),urlValidate:[j],validate:{errors:q,control:W,setValue:V}})}),(0,n.jsx)(s.ZP,{item:!0,xs:6,lg:1,children:(0,n.jsx)(w.Z,{required:!0,name:"unidadId",label:"Unidad",url:"repordenestrabajoestado/unidadRepOrdenesTrabajoEstado?regional=".concat(z),urlValidate:[z],validate:{errors:q,control:W,setValue:V}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,lg:1,children:(0,n.jsx)(w.Z,{required:!0,name:"a\xf1oId",label:"A\xf1o",url:"repordenestrabajoestado/aniosRepOrdenesTrabajoEstado?regional=".concat(z,"&unidad=").concat(_),urlValidate:[z,_],validate:{errors:q,control:W,setValue:V}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,lg:2,children:(0,n.jsx)(w.Z,{required:!1,name:"dependenciaId",label:"Dependencia",url:"repordenestrabajoestado/listaDependencia?regional=".concat(z,"&unidad=").concat(_,"&anio=").concat(N),urlValidate:[z,_,N],validate:{errors:q,control:W,setValue:V}})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,lg:1,children:(0,n.jsx)(w.Z,{required:!1,name:"mesId",label:"Mes",url:"repordenestrabajoestado/mesesRepOrdenesTrabajoEstado?regional=".concat(z,"&unidad=").concat(_,"&anio=").concat(N),urlValidate:[z,_,N],validate:{errors:q,control:W,setValue:V}})})]}),(z||_||N||M)&&(0,n.jsx)(s.ZP,{container:!0,item:!0,xs:12,justifyContent:"center",spacing:1,children:(0,n.jsx)(s.ZP,{item:!0,xs:5,md:6,lg:1,xl:.8,children:(0,n.jsx)(d.Z,{fullWidth:!0,variant:"contained",sx:{background:"".concat(ei||K?"#EBEBE4":I.Z[400]," !important"),color:"white !important"},disabled:ei||K,endIcon:(0,n.jsx)(Z.Z,{}),onClick:()=>{L(),H(!1),er(!1),ec(!1)},children:"Limpiar"})})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.ZP,{container:!0,justifyContent:"center",children:(0,n.jsxs)(s.ZP,{item:!0,xs:12,lg:4,children:[K&&(0,n.jsx)(o.Z,{height:300,display:"flex",alignItems:"center",children:(0,n.jsxs)(s.ZP,{container:!0,alignItems:"center",flexDirection:"column",gap:2,children:[(0,n.jsx)(l.Z,{color:"white",children:"Cargando..."}),(0,n.jsx)(c.Z,{color:"inherit",size:40})]})}),!K&&X&&(0,n.jsx)(u.Z,{sx:{background:"rgba(255,255,255, 0.8)"},children:(0,n.jsx)(m,{dataChart:$,dataLabel:U})})]})})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.ZP,{container:!0,justifyContent:"center",children:(0,n.jsxs)(s.ZP,{item:!0,xs:12,lg:4,children:[ei&&(0,n.jsx)(o.Z,{height:300,display:"flex",alignItems:"center",children:(0,n.jsxs)(s.ZP,{container:!0,alignItems:"center",flexDirection:"column",gap:2,children:[(0,n.jsx)(l.Z,{color:"white",children:"Cargando..."}),(0,n.jsx)(c.Z,{color:"inherit",size:40})]})}),!ei&&en&&(0,n.jsx)(u.Z,{sx:{background:"rgba(255,255,255, 0.8)",display:"flex",justifyContent:"center"},children:(0,n.jsx)(f,{dataChart:Y,dataLabel:et})})]})})}),(0,n.jsx)(s.ZP,{item:!0,xs:12,children:(0,n.jsx)(s.ZP,{container:!0,justifyContent:"center",spacing:2,children:(0,n.jsxs)(s.ZP,{item:!0,xs:12,lg:ev?6:4,children:[eu&&(0,n.jsx)(o.Z,{height:300,display:"flex",alignItems:"center",children:(0,n.jsxs)(s.ZP,{container:!0,alignItems:"center",flexDirection:"column",gap:2,children:[(0,n.jsx)(l.Z,{color:"white",children:"Cargando..."}),(0,n.jsx)(c.Z,{color:"inherit",size:40})]})}),!eu&&ed&&(0,n.jsx)(u.Z,{sx:{background:"rgba(255,255,255, 0.8)"},children:(0,n.jsxs)(s.ZP,{container:!0,justifyContent:"center",children:[(0,n.jsx)(s.ZP,{item:!0,xs:ev?9:12,children:ev?(0,n.jsx)(D,{dataChart:es}):(0,n.jsx)(E,{dataChart:es})}),ev&&(0,n.jsx)(s.ZP,{item:!0,xs:12,lg:3,children:(0,n.jsx)(k,{dataChart:es})})]})})]})})})]})})}),eh.open&&(0,n.jsx)(x.Z,{open:eh.open,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:5e3,onClose:()=>ep(eg),children:(0,n.jsx)(g.Z,{severity:eh.severity,sx:{width:"100%"},children:eh.message})})]})}},2435:function(e,t,a){"use strict";var n=a(5893),r=a(4069),i=a(1820),o=a(7294),s=a(6450),l=a(7536),d=a(1207);t.Z=e=>{let{name:t,required:a,label:c,url:u,urlValidate:x,validate:{errors:g,control:h}}=e,[p,b]=(0,o.useState)([]);return(0,o.useEffect)(()=>{let e=async()=>{try{let{data:{code:e,msg:a}}=await s.Z.get("/v1/api/".concat(u));0===e&&("mesId"===t?b(a.map(e=>({id:e.mes,description:e.nombreMes}))):"dependenciaId"===t?b(a.map(e=>({description:e}))):b(a.map(e=>({id:e,description:e}))))}catch(e){}};u&&!x.includes(void 0)&&e()},[u]),(0,n.jsx)(l.Qr,{control:h,name:t,render:e=>{let{field:{ref:o,onChange:s,value:l}}=e;return(0,n.jsx)(r.Z,{fullWidth:!0,options:p,getOptionLabel:e=>e.description&&e.description,value:l,onChange:(e,t)=>{s(t)},renderInput:e=>{var r;return(0,n.jsx)(i.Z,{...e,inputRef:o,required:a,label:c,variant:"standard",error:!!g[t],helperText:null==g?void 0:null===(r=g[t])||void 0===r?void 0:r.message,FormHelperTextProps:{component:d.Z},InputLabelProps:{shrink:!0},inputProps:{...e.inputProps,readOnly:!0}})},noOptionsText:"Informaci\xf3n no encontrada"})}})}},1207:function(e,t,a){"use strict";var n=a(5893),r=a(5861);t.Z=e=>{let{children:t}=e;return(0,n.jsx)(r.Z,{variant:"caption",color:"red",children:t})}},3310:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n,r=a(5893),i=a(7294),o=a(3219);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var l=function(e){return i.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),n||(n=i.createElement("circle",{cx:12,cy:12,r:12,fill:"#CDFF00"})))},d=e=>(0,r.jsx)(o.Z,{...e,component:l,inheritViewBox:!0})},6450:function(e,t,a){"use strict";var n=a(6154);let r=n.Z.create({baseURL:"http://192.168.1.12:7001/sigicmovil_back"});r.interceptors.request.use(async e=>{try{let{jwt:t}=await JSON.parse(sessionStorage.getItem("user")),{usuarioSipac:a}=await JSON.parse(sessionStorage.getItem("user")),{undeCodigoSipac:n,roles:r}=await JSON.parse(sessionStorage.getItem("user"));t&&(e.headers.Authorization="Bearer ".concat(t),e.headers.usuarioSipac="".concat(a),e.headers.undeCodigoSipac="".concat(n),e.headers.rol="".concat(Object.keys(r)))}catch(e){}return e},e=>Promise.reject(e)),t.Z=r},5579:function(e,t,a){"use strict";a.d(t,{V:function(){return n},g:function(){return r}});let n=e=>new Promise(t=>setTimeout(t,e));function r(){return(function(e){switch(!0){case e.indexOf("edg/")>-1:return"Microsoft Edge";case e.indexOf("opr")>-1&&!!window.opr:return"Opera";case e.indexOf("chrome")>-1&&!!window.chrome:return"Chrome";case e.indexOf("firefox")>-1:return"Mozilla Firefox";case e.indexOf("safari")>-1:return"Safari";default:return"Otro"}})(window.navigator.userAgent.toLowerCase()).toUpperCase()}}},function(e){e.O(0,[196,536,623,918,154,69,63,850,774,888,179],function(){return e(e.s=5384)}),_N_E=e.O()}]);